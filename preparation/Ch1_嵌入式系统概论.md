# 第一章 嵌入式系统概论

* 嵌入式系统的基本特点、系统组成、分类与应用
* 嵌入式芯片的开发流程
* 数字媒体处理和网络通信

------------

[TOC]



## 1.1 嵌入式系统及其应用

### 1.1.1 嵌入式系统

#### 定义

* 嵌入式计算机系统，嵌入在设备（或系统）内部，为特定应用而设计开发的**专用计算机系统**
* 控制、监视或协助设备、机器、工厂运行的硬件可裁剪、适应应用系统对功能、可靠性、成本、体积、功耗等多种约束的专用计算机系统
* Tips:
  * 一般既包含软件又包含硬件

  * 广义：凡是带有微处理器的专用软硬件系统都可以称为嵌入式系统

    狭义：使用嵌入式微处理器构成的具有自己的操作系统和特定功能、用于特定场合的独立系统

  * 嵌入式应用（系统）：使用了嵌入式计算机的设备/产品/应用系统

    嵌入式系统：嵌入式计算机系统

    ”嵌入式“用作定语，嵌入式处理器指的是使用在嵌入式系统中的处理器


#### 特点

* **专用性**：实现特定应用需求，目标明确，作最优化设计和裁剪，运行效率很高
* 隐蔽性：只是非计算机设备（系统）中的一个部分，隐藏在内部
* **资源受限**：要求小型化、轻量化、低功耗及低成本，软硬件资源受到严格限制
* **高可靠性**：多数面向控制应用，可靠性十分重要，误动作可能产生致命的后果
* 实时性：在可预测和有保证的时间范围内对外部事件做出正确的反应
* 软件固化：软件一般固化在**ROM**中，用户不能随意变更其中的程序功能


#### 应用

消费类应用产品，产业类应用产品，业务类应用产品，军用类应用产品

eg：汽车：a.电子控制装置：与汽车机械系统配合使用，即所谓“机电结合”的部件，包括发动机、底盘、车身的电子控制；b.车载电子装置：与汽车本身性能并无直接关系，但为用户提供了更多的服务，如导航系统、汽车音响以及电子娱乐系统、车载通信系统等。

### 1.1.2 嵌入式系统的组成及分类

#### 逻辑组成

硬件和软件两部分组成，硬件主体是**中央处理器和存储器**，通过**输入/输出(I/O)接口和输入/输出设备**与外部世界联系，并借助**总线**互相连接，同**软件**一起构成完整的嵌入式系统。

* 处理器：能按照指令的规定高速度完成二进制数据算术和逻辑运算的部件

  * 大规模集成电路出现，采用了微米级(目前是深亚微米级至纳米级)的半导体加工工艺，称为微处理器(microprocessor)

  * 组成：运算器，控制器，寄存器，高速缓冲存储器(cache)

  * 中央处理器(CPU)：负责运行系统软件和应用软件的主处理器，不可或缺
    协处理器：数字信号处理器(DSP)，图形处理器，通信处理器
    `字长：CPU中通用寄存器和定点运算器的二进位宽度。现在嵌入式系统中使用最多的还是8,16位的CPU，但32,64位CPU是技术发展的主流；通用计算机的CPU则以64位为主。`
  * 影响CPU执行速度（性能主要表现为程序或指令执行速度的快慢）因素：
    *  主频（CPU时钟频率）：CPU中门电路的工作频率，决定CPU芯片内部数据传输与操作速度的快慢
    *  系统：指令的格式、类型和指令的数目、功能都会影响程序的执行速度
    *  高速缓冲存储器的容量和结构：cache有利于减少CPU访问内存的次数，容量越大级数越多效用越显著
    *  逻辑结构：CPU包含的定点运算器和浮点运算器数目、有无协处理器、流水线级数和条数、有无指令预测和数据预取功能


* 存储器：存储程序和数据

  * RAM随机存取存储器（易失性存储器）：
    * DRAM（电容）：电路简单，集成度高，功耗小，成本低，通常用作存放正在运行/处理/的程序/数据的工作存储器
    * SRAM（双稳态）：电路较复杂，集成度低，功耗较大，成本高，**工作速度非常快，常与CPU内核集成在同一芯片内，用作程序和数据的高速缓冲存储器**
  * ROM只读存储器（非易失存储器）：
    * Mask ROM：掩膜，不可修改
    * EEPROM：电可擦可编程，通过专用设备离线修改，存放很少需要更新的程序代码（称为固件）
    * Flash memory：能方便地在线写入信息
      * NOR Flash：单字节随机存取，可以直接被CPU执行
      * NAND Flash：以页（行）为单位存取，读出速度稍慢，通常应将程序或数据预先读入到RAM中再使用；容量、使用寿命、成本有较大优势，做成存储卡或U盘，作为辅助存储器
```
片内存储器（内置存储器）：集成在嵌入式处理器芯片内部，如cache(SRAM)
片外存储器（内置存储器）：安装在电路板上，如内存(DRAM)
扩充存储器：可插拔形式，需要时才插入宿主设备使用(NAND Flash)
```

* I/O设备与I/O接口

  * 用于人机交互的设备，是**用户界面的硬件部分**

  * 用于机机交互的设备

  * 分类：数据传输速率，数据传输方式，是否需要物理连接，是否能连接多个设备，总线式和独占式
```
常用接口
通用串行总线式接口：USB 2.0/USB 3.0，IEEE 1394，以太网接口
异步串行接口：RS-232-C,RS-485
视频信号接口：VGA(video graphics array),DVI(digital video interface),HDMI(high definition multimedia interface)
工业总线接口：CAN(control area network),1533B,LIN(local interconnect network)
无线接口：IrDA,Bluetooth,Zigbee,WiFi
```
* 数据总线(Data Bus)

  * 简称总线，是嵌入式系统各组件之间进行数据传输的一个传输通路
  * 由**传输线和控制电路**组成
  * 内部总线（系统内部的组件连接）和外部总线（扩充总线，与外部组件进行连接）
* 软件
  * 低端：无操作系统，一个监控程序，若干设备驱动程序和事件处理程序
  * 高端：板极支持包(Board Support Packet, BSP)，设备驱动程序，实时操作系统，中间件，嵌入式应用软件
    1. **BSP和驱动属于底层软件，在操作系统和硬件之间构成一个硬件抽象层，负责屏蔽具体硬件的差异和细节，向操作系统提供统一的标准接口**
    2. 实时操作系统是整个嵌入式系统的核心，a.负责管理系统中的各种软硬件资源，b.完成任务调度、存储分配、文件管理、人机交互等功能，c.是应用软件的运行平台
    3. 中间件位于操作系统与应用软件之间，为上层的应用软件提供开发和运行环境，**向应用软件提供了标准化编程接口，使应用软件的开发相对独立于硬件和操作系统，并使应用软件能在不同的系统上运行**
    4. 应用软件专门用于解决具体应用问题